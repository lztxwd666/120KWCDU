# **1.树莓派安装依赖环境**

### 更新系统

|          命令           |    说明     |   注意项    |
|:---------------------:|:---------:|:--------:|
|   `sudo apt update`   |  更新软件包列表  |    无     |
| `sudo apt upgrade -y` | 升级已安装的软件包 | 可能需要较长时间 |

### 安装 Git、Python、pip、venv

|                             命令                             |             说明             | 注意项 |
|:----------------------------------------------------------:|:--------------------------:|:---:|
| `sudo apt install -y git python3 python3-pip python3-venv` | 安装 Git、Python3、pip3 和 venv |  无  |

---

# **2.从 GitHub 拉取项目**

### 仓库地址：

_https://github.com/lztxwd666/120KWCDU.git_

|                          命令                           |     说明      | 注意项 |
|:-----------------------------------------------------:|:-----------:|:---:|
|                    `cdu /homme/pi`                    | 进入 pi 用户主目录 |  无  |
| `git clone https://github.com/lztxwd666/120KWCDU.git` |   克隆项目到本地   |  无  |

克隆成功后pi目录下会出现该项目的文件夹

---

# **3.创建 Python 虚拟环境**

|             命令              |      说明      | 注意项 |
|:---------------------------:|:------------:|:---:|
|   `cd /home/pi/120KWCDU`    |   进入项目文件夹    |  无  |
|   `python3 -m venv .venv`   | 创建虚拟环境 .venv |  无  |
| `source .venv/bin/activate` |    激活虚拟环境    |  无  |

---

# **4.安装依赖**

如果有依赖文件 requirements.txt，那么直接安装(只建议创建依赖文件，使用依赖文件方式安装)

|                命令                 |  说明   | 注意项  |
|:---------------------------------:|:-----:|:----:|
| `pip install -r requirements.txt` | 安装依赖包 | 标准方式 |

如果没有，请手动安装所需依赖，例如：

|                   命令                   |    说明     |     注意项     |
|:--------------------------------------:|:---------:|:-----------:|
| `pip install pymodbus flask waitress ` | 手动安装所需依赖包 | 只建议使用依赖文件安装 |

---

# **5.手动启动程序**

|             命令             |   说明    |        注意项        |
|:--------------------------:|:-------:|:-----------------:|
|     `python3 main.py`      |  启动主程序  |         无         |
| `python3 -m cdu120kw.main` | 另一种启动方式 | 如果代码使用相对导入，则使用该方式 |

如果可以成功运行，说明环境正常

---

# **6.项目更新**

当你更新 GitHub 代码后

|                命令                 |       说明       |     注意项      |
|:---------------------------------:|:--------------:|:------------:|
|      `cd /home/pi/120KWCDU`       |    进入项目文件夹     |      无       |
|            `git pull`             | 从github上拉取最新代码 |      无       |
|    `source .venv/bin/activate`    |     激活虚拟环境     |      无       |
| `pip install -r requirements.txt` |     安装最新依赖     | 如果依赖没更新，可以省略 |
