import{e as y,d as k,f as b,g as N,s as V,h as _,c as E,i as p,a as t,n as $,j as e,w as l,k as B,l as C,u as I,b as S,m as L,E as q,p as R,t as x,q as m}from"./index-EpIlRf8H.js";import{i as z}from"./dark-DWnKPEVS.js";import{E as D,a as f,b as w}from"./index-C2Sp7MAI.js";import"./index-BRPcrgw_.js";const K="/assets/Slogan_Left_Black-DKtHdfv7.png",T="/assets/Slogan_Left_White-B4a2pNCj.png";function U(c){return y({url:"/api/login",method:"post",data:c}).then(n=>{const{headers:o,data:r}=n,d=o.authorization.match(/Bearer (.*)/)[1];return localStorage.setItem("token",d),r})}const j={class:"login-form-container"},F={class:"login-form-content"},A=k({__name:"login",setup(c){const n=b(),o=N({userName:void 0,password:""}),r=V("password"),d=I();function g(a){a&&U({username:o.userName,password:o.password}).then(s=>{if(s.code===0){m({message:s.message,type:"success",duration:1e3,onClose:()=>{d.push({path:"/redfish/dashboard"})}});return}m.error(s.message)}).catch(s=>{console.error(s),m.error("Login failed")})}function h(){r.value=r.value==="password"?"text":"password"}const v=_(()=>z.value?T:K);return(a,s)=>(S(),E("div",j,[p("div",F,[p("div",{class:"logo-custom",style:$({backgroundImage:"url(".concat(e(v),")")})},null,4),t(e(D),{ref_key:"formRef",ref:n,"label-position":"right","label-width":"auto",model:e(o),style:{width:"100%",height:"100%"},onKeyup:s[3]||(s[3]=C(i=>{var u;return(u=e(n))==null?void 0:u.validate(g)},["enter"])),onSubmit:s[4]||(s[4]=B(()=>{},["prevent"]))},{default:l(()=>[t(e(f),{label:a.$t("userName"),prop:"userName",rules:[{required:!0,message:"user name is required"}]},{default:l(()=>[t(e(w),{modelValue:e(o).userName,"onUpdate:modelValue":s[0]||(s[0]=i=>e(o).userName=i),type:"text",placeholder:a.$t("pleaseInputUserName")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(e(f),{label:a.$t("password"),prop:"password",required:""},{default:l(()=>[t(e(w),{modelValue:e(o).password,"onUpdate:modelValue":s[1]||(s[1]=i=>e(o).password=i),type:e(r),placeholder:a.$t("pleaseInputPassword")},{suffix:l(()=>[p("span",{class:L(e(r)==="password"?"i-icon-park-outline-preview-close":"i-icon-park-outline-preview-open"),"hover:cursor-pointer":"",onClick:h},null,2)]),_:1},8,["modelValue","type","placeholder"])]),_:1},8,["label"]),t(e(f),{label:" "},{default:l(()=>[t(e(q),{type:"primary",style:{width:"100%"},onClick:s[2]||(s[2]=i=>{var u;return(u=e(n))==null?void 0:u.validate(g)})},{default:l(()=>[R(x(a.$t("login")),1)]),_:1})]),_:1})]),_:1},8,["model"])])]))}});export{A as default};
